{% extends 'base.html' %}
{% block title %}Activity Log — Dex Inv{% endblock %}
{% block pagetitle %}Activity Log{% endblock %}
{% block breadcrumb %}dex-inv / admin / activity{% endblock %}

{% block content %}
<div class="card" style="animation:pageIn .35s ease both">
  <div class="card-hd">
    <span>User Activity Log</span>
    <span style="color:var(--muted2);font-family:var(--font-mono);font-size:10px">{{ logs|length }} events</span>
  </div>
  <div style="overflow-x:auto">
    <table class="dtable">
      <thead><tr>
        <th>#</th><th>Timestamp</th><th>User</th><th>Action</th><th>Detail</th><th>IP</th>
      </tr></thead>
      <tbody>
        {% for log in logs %}
        <tr>
          <td style="font-family:var(--font-mono);font-size:11px;color:var(--muted2)">{{ log.id }}</td>
          <td style="font-family:var(--font-mono);font-size:11px;color:var(--muted2);white-space:nowrap">{{ log.timestamp }}</td>
          <td>
            <div style="display:flex;align-items:center;gap:7px">
              <div style="width:24px;height:24px;border-radius:6px;background:rgba(6,214,160,.15);
                display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;color:#06d6a0;flex-shrink:0">
                {{ log.username[0].upper() if log.username else '?' }}
              </div>
              <span style="font-size:13px;font-weight:500">{{ log.username or '—' }}</span>
            </div>
          </td>
          <td>
            {% set a = log.action.lower() %}
            <span class="chip {% if 'login' in a %}chip-green{% elif 'delete' in a %}chip-red{% elif 'add' in a or 'create' in a %}chip-blue{% elif 'edit' in a or 'update' in a %}chip-yellow{% else %}chip-gray{% endif %}">
              {{ log.action }}
            </span>
          </td>
          <td style="font-size:12px;color:var(--muted2)">{{ log.detail or '—' }}</td>
          <td style="font-family:var(--font-mono);font-size:11px;color:var(--muted2)">{{ log.ip or '—' }}</td>
        </tr>
        {% else %}
        <tr><td colspan="6" style="text-align:center;padding:40px;color:var(--muted2)">No activity recorded yet.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
